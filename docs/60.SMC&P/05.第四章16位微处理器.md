---
title: 第四章 16位微处理器
date: 2021-05-16 15:30:00
permalink: /SMC&P/note/4
author: 
    name: eric
    href: https://wfmiss.cn
---

# 第四章 16位微处理器

## 1. 16位微处理器概述

8086和8088 CPU的内部基本相同，但它们的外部性能是有区别的。

8086 是16位数据总线，而8088是8位数据总线，在处理一个16位数据字时，8088需要两步操作而8086只需要一步。

8086和8088 CPU的内部都采用16位字进行操作及存储器寻址，两者的软件完全兼容，程序的执行也完全相同。

然而，由于8088要比8086有较多的**外部存取操作**。所以，对相同的程序，它将执行得较慢。这两种微处理器都封装在相同的40脚双列直插组件(DIP)中。

## 2. 8086/8088微型处理器（CPU）

8086 CPU从功能上可分两部分，即**总线接口部件（BIU）和执行部件（EU）**。8086的内部结构如图。

![](https://cdn.jsdelivr.net/gh/wfmiss/pictures/Principle_and_application_of_microcomputer/20210526181730.png)

###  2.1执行部件（EU）

执行部件（EU）的功能就是负责指令的执行。将指令译码并利用内部的寄存器和ALU对数据进行所需处理。

执行部件由下列部分组成：

- 4个通用寄存器，即AX、BX、CX、DX；
- 4个专用寄存器，即基数指针寄存器BP，堆栈指针寄存器SP，源变址寄存器SI，目的的变址寄存器DI；
- 标志寄存器（FR）；
- 算数逻辑部件（ALU）。

8086/8088 的EU有以下特点：

- 4个通用寄存器既可以作为16位寄存器使用，也可以作为8位寄存器使用。当BX寄存器作为8位寄存器时，分为BH和BL，BH为高8位，BL为低8位。
- AX寄存器也常称为累加器，8086指令系统中有许多指令都是通过累加器的动作来执行的。当累加器作为16位来使用时，可以进行按字乘操作、按字除操作、按字输入/输出和其他字传送等；当累加器作为8位来使用时，可以实现按字节乘操作、按字节除操作、按字节输入/输出和其他字节传送，以及十进制运算等。
- 加法累加器是算数逻辑的主要部件，绝大部分指令的执行都由加法器来完成。
- 标志寄存器FR共有16位，其中7位未用，所用的各位含义如下：

<img src="https://cdn.jsdelivr.net/gh/wfmiss/pictures/Principle_and_application_of_microcomputer/20210526231231.png" style="zoom:150%;" />

根据功能，8086的标志可分为两类：状态标志——它是操作在执行后，决定算术逻辑部件ALU处在何种状态，这种状态会影响后面的操作。控制标志——它是人为设置的，指令系统中有专门的指令用于控制标志的设置和清除，每个控制标志都对每一种特定的功能起控制作用。

状态标志有6个，即SF ，ZF，PF，CF，AF和OF(见表4-1)。

### 2.2总线接口部件（BIU）

总线接口部件的功能是负责与存储器、I/O端口传送数据，即BIU管理在存储器中存取程序和数据的实际处理过程。

总线接口部件由下列各部分组成：

(1) 4个段地址寄存器，即

```txt
CS —— 16位代码段寄存器;
DS —— 16位数据段寄存器;
ES —— 16位附加段寄存器;
SS —— 16位堆栈段寄存器。
```

(2) 16位指令指针寄存器 IP。

![表4-1 8086/8088 标志位表](https://cdn.jsdelivr.net/gh/wfmiss/pictures/Principle_and_application_of_microcomputer/20210526232227.png)

（3）20位地址加法器。

（4）6字节的队列指令。

8086/8088的 BIU有如下特点：

(1)8086 的指令队列为6个字节，8088的指令队列为4个字节。不管是8086还是8088，都会在执行指令的同时，从内存中取下一条指令或下几条指令，取来的指令就放在指令列中。这样，一般情况下，CPU执行完一条指令就可以立即执行下一条指令，而不需要像以往的计算机那样，让CPU轮番进行取指令和执行指令的操作，从而提高了CPU的效率。

(2)地址加法器用来产生20位地址。上面已经提到，8086可用20位地址寻址1M字节的内存空间，但8086 内部所有的寄存器都是16位的，所以需要由一个附加的机构来根据16位寄存器提供的信息计算出0位的物理地址，这个机构就是20位的地址加法器。

例如，一条指令的物理地址就是根据代码段寄存器CS和指令指针寄存器IP的内容得到的。具体计算时，要将段寄存器的内容左移4位，然后再与IP的内容相加。假设`CS=OFEO0H, IP=0400H`，此时指令的物理地址为`0FE400H`。

总线接口部件和执行部件并不是同步工作的，它们是按以下流水线技术原则管理：

(1）每当8086 的指令队列中有两个空字节，或者8088的指令队列中有一个空字节时，总线接口部件就会自动把指令取到指令队列中。

(2)每当执行部件准备执行一条指令时，它会从总线接口部件的指令队列前部取出指令的代码，然后用几个时钟周期去执行指令。在执行指令的过程中，如果必须访问存储器或者输入/输出设备，那么，执行部件就会请求总线接口部件，进人总线周期，完成访问内存或者输人/输出端口的操作；如果此时总线接口部件正好处于空闲状态，那么，会立即响应执行部件的总线请求。但有时会遇到这样的情况，执行部件请求总线接口部件访问总线时，总线接口部件正在将某个指令字节取到指令队列中，此时总线接口部件将首先完成这个取指令的总线周期，然后再去响应执行部件发出的访问总线的请求。

(3)当指令队列已满，而且执行部件又没有总线访问时，总线接口部件便进人空闲状态。

(4)在执行转移指令、调用指令和返回指令时，下面要执行的指令就不是在程序中紧接着的那条指令了，而总线接口部件往指令队列装入指令时，总是按顺序进行的，这样，指令队列中已经装入的字节就没有用了。遇到这种情况，指令队列中的原有内容被自动消除，总线接口部件会接着往指令队列中装人另一个程序段中的指令。

### 2.3存储器结构

