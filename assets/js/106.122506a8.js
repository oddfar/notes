(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{466:function(s,a,t){"use strict";t.r(a);var n=t(15),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("ul",[a("li",[a("a",{attrs:{href:"#%E5%AE%98%E7%BD%91%E7%9B%B8%E5%85%B3%E6%95%99%E7%A8%8B"}},[s._v("官网相关教程")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E5%AE%89%E8%A3%85elasticsearch"}},[s._v("安装ElasticSearch")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#windows-%E7%89%88%E6%9C%AC"}},[s._v("windows 版本")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#linux-%E7%89%88%E6%9C%AC"}},[s._v("linux 版本")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E4%BD%BF%E7%94%A8-docker"}},[s._v("使用 Docker")])])])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E9%85%8D%E7%BD%AE%E5%AF%86%E7%A0%81%E8%AE%BF%E9%97%AE"}},[s._v("配置密码访问")])])]),s._v(" "),a("h2",{attrs:{id:"官网相关教程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#官网相关教程"}},[s._v("#")]),s._v(" 官网相关教程")]),s._v(" "),a("blockquote",[a("p",[s._v("安装ElasticSearch还是先要看下官方网站。")])]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.elastic.co/cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方网站"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.elastic.co/guide/cn/elasticsearch/guide/current/running-elasticsearch.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方2.x中文教程中安装教程"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.elastic.co/cn/downloads/elasticsearch",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方ElasticSearch下载地址"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.elastic.co/cn/downloads/kibana",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方Kibana下载地址"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("本系列教程基于ElasticSearch 7.x版本。")]),s._v(" "),a("h2",{attrs:{id:"安装elasticsearch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装elasticsearch"}},[s._v("#")]),s._v(" 安装ElasticSearch")]),s._v(" "),a("p",[a("font",{staticStyle:{color:"red"}},[s._v("ElasticSearch 是使用 java 开发的，且本版本的 es 需要的 jdk 版本要是 1.8 以上，所以安装ElasticSearch 之前保证 JDK1.8+ ，并正确的配置好JDK环境变量，否则会启动ElasticSearch失败。")])],1),s._v(" "),a("h3",{attrs:{id:"windows-版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows-版本"}},[s._v("#")]),s._v(" windows 版本")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("ElasticSearch")])]),s._v(" "),a("p",[s._v("win下载：https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.6.1.zip")]),s._v(" "),a("ul",[a("li",[s._v("文件：")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("bin：启动文件\nconfig：配置文件\n    log4j2.properties：日志配置文件\n    jvm.options：java虚拟机的配置\n    elasticsearch.yml：es的配置文件\ndata：索引数据目录\nlib：相关类库Jar包\nlogs：日志目录\nmodules：功能模块\nplugins：插件\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ul",[a("li",[s._v("启动：")])]),s._v(" "),a("p",[s._v("双击 ElasticSearch 下的 bin 目录中的 elasticsearch.bat 启动")]),s._v(" "),a("ul",[a("li",[s._v("访问：")])]),s._v(" "),a("p",[s._v("http://localhost:9200")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("安装ES的图形化界面插件客户端Head")])]),s._v(" "),a("p",[s._v("注意：需要 NodeJS 的环境")]),s._v(" "),a("p",[s._v("Head 是 elasticsearch 的集群管理工具，可以用于数据的浏览查询！被托管在 github 上面！")]),s._v(" "),a("p",[s._v("地址： https://github.com/mobz/elasticsearch-head/")]),s._v(" "),a("p",[a("strong",[s._v("1、下载并解压")])]),s._v(" "),a("p",[s._v("下载 elasticsearch-head-master.zip")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装依赖！")]),s._v("\ncnpm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#运行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("2、修改配置文件 "),a("code",[s._v("elasticsearch.yml")])])]),s._v(" "),a("p",[s._v("由于 ES 进程和客户端进程端口号不同，存在跨域问题，所以我们要在 ES 的配置文件中配置下跨域问题")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 跨域配置：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http.cors.enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http.cors.allow-origin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("3、启动测试")])]),s._v(" "),a("p",[s._v("启动 ElasticSearch")]),s._v(" "),a("p",[s._v("并使用head工具进行连接测试！")]),s._v(" "),a("p",[s._v("访问url：http://localhost:9100/")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("安装Kibana")])]),s._v(" "),a("p",[s._v("Kibana 是一个针对 Elasticsearch 的开源分析及可视化平台，用来搜索、查看交互存储在 Elasticsearch 索引中的数据。")]),s._v(" "),a("p",[s._v("使用Kibana，可以通过各种图表进行高级数据分析及展示。Kibana让海量数据更容易理解。它操作简单，基于浏览器的用户界面可以快速创建仪表板（dashboard）实时显示Elasticsearch查询动态。")]),s._v(" "),a("p",[s._v("设置Kibana非常简单。无需编码或者额外的基础架构，几分钟内就可以完成Kibana安装并启动 Elasticsearch索引监测。")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("下载Kibana")])])]),s._v(" "),a("p",[s._v("注意版本对应关系： https://www.elastic.co/cn/downloads/kibana")]),s._v(" "),a("p",[s._v("解压后进入，双击 "),a("code",[s._v("kibana.bat")]),s._v(" 启动服务就可以了，ELK基本上都是拆箱即用的")]),s._v(" "),a("p",[s._v("然后访问 http://localhost:5601/")]),s._v(" "),a("p",[s._v("kibana会自动去访问9200，也就是 elasticsearch 的端口号（当然 elasticsearch 这个时候必须启动着），然后就可以使用 kibana 了！")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("访问界面是英文，可修改成中文")])])]),s._v(" "),a("p",[s._v("只需要在配置文件 kibana.yml 中加入")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("i18n.locale")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh-CN"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("重启即可！")]),s._v(" "),a("h3",{attrs:{id:"linux-版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-版本"}},[s._v("#")]),s._v(" linux 版本")]),s._v(" "),a("p",[a("mark",[s._v("请先确保安装了 jdk1.8 以上版本")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("安装ElasticSearch")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("进入一个目录，下载")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.6.1-linux-x86_64.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("解压")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf /opt/elasticsearch-7.6.1-linux-x86_64.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("增加elasticSearch用户")])])]),s._v(" "),a("p",[s._v("必须创建一个非root用户来运行ElasticSearch"),a("Badge",{attrs:{text:"ElasticSearch5及以上版本，基于安全考虑，强制规定不能以root身份运行。",type:"warning"}})],1),s._v(" "),a("p",[s._v("如果你使用root用户来启动ElasticSearch，则会有如下错误信息：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-0-6-centos elasticsearch-7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./bin/elasticsearch")]),s._v("\nOpenJDK "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.0")]),s._v(" and will likely be removed "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a future release.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-11T17:15:56,884"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("o.e.b.ElasticsearchUncaughtExceptionHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("VM-0-6-centos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" uncaught exception "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" thread "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\norg.elasticsearch.bootstrap.StartupException: java.lang.RuntimeException: can not run elasticsearch as root\n\tat org.elasticsearch.bootstrap.Elasticsearch.init"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Elasticsearch.java:174"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch-7.6.1.jar:7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.execute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Elasticsearch.java:161"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch-7.6.1.jar:7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tat org.elasticsearch.cli.EnvironmentAwareCommand.execute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("EnvironmentAwareCommand.java:86"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch-7.6.1.jar:7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Command.java:125"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch-cli-7.6.1.jar:7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tat org.elasticsearch.cli.Command.main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Command.java:90"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch-cli-7.6.1.jar:7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Elasticsearch.java:126"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch-7.6.1.jar:7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Elasticsearch.java:92"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch-7.6.1.jar:7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nCaused by: java.lang.RuntimeException: can not run elasticsearch as root\n\tat org.elasticsearch.bootstrap.Bootstrap.initializeNatives"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Bootstrap.java:105"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch-7.6.1.jar:7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tat org.elasticsearch.bootstrap.Bootstrap.setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Bootstrap.java:172"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch-7.6.1.jar:7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tat org.elasticsearch.bootstrap.Bootstrap.init"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Bootstrap.java:349"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch-7.6.1.jar:7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.init"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Elasticsearch.java:170"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elasticsearch-7.6.1.jar:7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v("\nuncaught exception "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" thread "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\njava.lang.RuntimeException: can not run elasticsearch as root\n\tat org.elasticsearch.bootstrap.Bootstrap.initializeNatives"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Bootstrap.java:105"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat org.elasticsearch.bootstrap.Bootstrap.setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Bootstrap.java:172"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat org.elasticsearch.bootstrap.Bootstrap.init"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Bootstrap.java:349"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.init"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Elasticsearch.java:170"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.execute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Elasticsearch.java:161"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat org.elasticsearch.cli.EnvironmentAwareCommand.execute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("EnvironmentAwareCommand.java:86"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Command.java:125"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat org.elasticsearch.cli.Command.main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Command.java:90"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Elasticsearch.java:126"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Elasticsearch.java:92"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nFor complete error details, refer to the log at /opt/elasticsearch-7.6.1/logs/elasticsearch.log\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("p",[s._v("增加 elasticsearch 用户：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-0-6-centos elasticsearch-7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# useradd elasticsearch")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-0-6-centos elasticsearch-7.6.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# passwd elasticsearch")]),s._v("\nChanging password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user elasticsearch.\nNew password: \nBAD PASSWORD: The password contains the user name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" some form\nRetype new password: \npasswd: all authentication tokens updated successfully.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("修改目录权限至新增的 elasticsearch 用户（没权限启动会报错）")]),s._v(" "),a("p",[s._v("在 root 用户下执行命令")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-0-6-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chown -R elasticsearch /opt/elasticsearch-7.6.1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("启动")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#\t切换用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" elasticsearch\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#\t启动")]),s._v("\n./bin/elasticsearch "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("查看安装是否成功")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-0-6-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# netstat -ntlp | grep 9200")]),s._v("\ntcp6       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:9200          :::*                    LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11601")]),s._v("/java          \ntcp6       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" ::1:9200                :::*                    LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11601")]),s._v("/java          \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#\t访问成功")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-0-6-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 127.0.0.1:9200")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"VM-0-6-centos"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster_name"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"elasticsearch"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster_uuid"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sLGiUbfQQ5-btWB9QiOnxg"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"number"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7.6.1"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build_flavor"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build_type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tar"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build_hash"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aa751e09be0a5072e8570670309b1f12348f023b"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build_date"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-29T00:15:25.529771Z"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build_snapshot"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lucene_version"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8.4.0"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"minimum_wire_compatibility_version"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6.8.0"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"minimum_index_compatibility_version"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6.0.0-beta1"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tagline"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"You Know, for Search"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("安装Kibana")])]),s._v(" "),a("p",[s._v("安装 Kibana 及 ElasticSearch 相关配置请访问：https://www.pdai.tech/md/db/nosql-es/elasticsearch-x-install.html")]),s._v(" "),a("h3",{attrs:{id:"使用-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-docker"}},[s._v("#")]),s._v(" 使用 Docker")]),s._v(" "),a("p",[s._v("官方文档：https://www.elastic.co/guide/en/kibana/current/docker.html")]),s._v(" "),a("p",[s._v("创建网络")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" network create elastic\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("加上内存限制启动 ES")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" es01-test "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--net")]),s._v(" elastic "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v(":9200 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v(":9300 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovery.type=single-node"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_JAVA_OPTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Xms64m -Xmx512m"')]),s._v(" elasticsearch:7.6.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("启动 Kibana")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" kib01-test "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--net")]),s._v(" elastic "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5601")]),s._v(":5601 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ELASTICSEARCH_HOSTS=http://es01-test:9200"')]),s._v(" kibana:7.6.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("可视化工具 Elasticsearch-head（可选）")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" head-test "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--net")]),s._v(" elastic "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9100")]),s._v(":9100  mobz/elasticsearch-head:5\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"配置密码访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置密码访问"}},[s._v("#")]),s._v(" 配置密码访问")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("修改Elastic配置")])]),s._v(" "),a("p",[s._v("使用基本许可证时，默认情况下禁用Elasticsearch安全功能。由于我测试环境是放在公网上的，所以需要设置下密码访问。相关文档可以参考"),a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.12/security-minimal-setup.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("1、进入正在运行的容器")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" 容器id /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装 vim")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("2、更改 "),a("code",[s._v("config/elasticsearch.yml")]),s._v(" 文件，设置 "),a("code",[s._v("xpack.security.enabled")]),s._v(" 为 true")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@06c5914709a5 config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim elasticsearch.yml")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@06c5914709a5 config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat elasticsearch.yml")]),s._v("\ncluster.name: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-cluster"')]),s._v("\nnetwork.host: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\nxpack.security.enabled: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("3、重启elasticsearch容器")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-0-6-centos z-test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker restart es01-test")]),s._v("\nes01-test\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("4、进入容器设置各个组件的密码")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@06c5914709a5 elasticsearch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./bin/elasticsearch-setup-passwords interactive")]),s._v("\nInitiating the setup of passwords "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" reserved "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" elastic,apm_system,kibana,logstash_system,beats_system,remote_monitoring_user.\nYou will be prompted to enter passwords as the process progresses.\nPlease confirm that you would like to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("continue")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("y\n\n\nEnter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elastic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elastic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nEnter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("apm_system"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("apm_system"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nEnter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kibana"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kibana"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nEnter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("logstash_system"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("logstash_system"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nEnter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("beats_system"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("beats_system"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nEnter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote_monitoring_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote_monitoring_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nChanged password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("apm_system"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kibana"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("logstash_system"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("beats_system"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote_monitoring_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elastic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("修改 Kibana 配置")])]),s._v(" "),a("p",[s._v("1、修改 "),a("code",[s._v("kibana.yml")])]),s._v(" "),a("p",[s._v("进入容器")]),s._v(" "),a("p",[s._v("添加配置： "),a("code",[s._v('elasticsearch.username: "elastic"')])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("bash-4.2$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" kibana.yml\nbash-4.2$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" kibana.yml\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ** THIS IS AN AUTO-GENERATED FILE **")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default Kibana configuration for docker target")]),s._v("\nserver.name: kibana\nserver.host: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\nelasticsearch.hosts: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://elasticsearch:9200"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nxpack.monitoring.ui.container.elasticsearch.enabled: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nelasticsearch.username: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"elastic"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("2、创建kibana keystore")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("./bin/kibana-keystore create\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("3、在kibana keystore 中添加密码")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("./bin/kibana-keystore "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" elasticsearch.password\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("4、重启容器")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-0-6-centos /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker restart kib01-test")]),s._v("\nkib01-test\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("再次访问："),a("code",[s._v("ip:9200")]),s._v("，则需要输入账号和密码")]),s._v(" "),a("p",[s._v("账号为：elastic")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://testingcf.jsdelivr.net/gh/oddfar/static/img/ElasticSearch/image-20210613152724020.png",alt:"image-20210613152724020"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);